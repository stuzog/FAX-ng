<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Fine-Tuning Using Your Log Files | FreeAPS-X-ng User Guide</title>
  <meta name="description" content="Settings and Steps for installing, setting up, and running FreeAPS X, in order of listing in the app. If not mentioned, leave existing Default Settings" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Fine-Tuning Using Your Log Files | FreeAPS-X-ng User Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Settings and Steps for installing, setting up, and running FreeAPS X, in order of listing in the app. If not mentioned, leave existing Default Settings" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Fine-Tuning Using Your Log Files | FreeAPS-X-ng User Guide" />
  
  <meta name="twitter:description" content="Settings and Steps for installing, setting up, and running FreeAPS X, in order of listing in the app. If not mentioned, leave existing Default Settings" />
  

<meta name="author" content="Compiled by Stuart Hertzog" />


<meta name="date" content="2022-06-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="add-pump.html"/>
<link rel="next" href="adjustmentfactor.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">FreeAPS-X-ng User Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> How To Use This Guide</a></li>
<li class="chapter" data-level="2" data-path="initial-settings.html"><a href="initial-settings.html"><i class="fa fa-check"></i><b>2</b> Initial Settings</a><ul>
<li class="chapter" data-level="2.1" data-path="initial-settings.html"><a href="initial-settings.html#services"><i class="fa fa-check"></i><b>2.1</b> SERVICES</a><ul>
<li class="chapter" data-level="2.1.1" data-path="initial-settings.html"><a href="initial-settings.html#nightscout"><i class="fa fa-check"></i><b>2.1.1</b> Nightscout</a></li>
<li class="chapter" data-level="2.1.2" data-path="initial-settings.html"><a href="initial-settings.html#cgm"><i class="fa fa-check"></i><b>2.1.2</b> CGM</a></li>
<li class="chapter" data-level="2.1.3" data-path="initial-settings.html"><a href="initial-settings.html#notifications"><i class="fa fa-check"></i><b>2.1.3</b> Notifications</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="initial-settings.html"><a href="initial-settings.html#configuration"><i class="fa fa-check"></i><b>2.2</b> CONFIGURATION</a><ul>
<li class="chapter" data-level="2.2.1" data-path="initial-settings.html"><a href="initial-settings.html#preferences"><i class="fa fa-check"></i><b>2.2.1</b> Preferences</a></li>
<li class="chapter" data-level="2.2.2" data-path="initial-settings.html"><a href="initial-settings.html#basal-profile"><i class="fa fa-check"></i><b>2.2.2</b> Basal Profile</a></li>
<li class="chapter" data-level="2.2.3" data-path="initial-settings.html"><a href="initial-settings.html#insulin-sensitivities"><i class="fa fa-check"></i><b>2.2.3</b> Insulin Sensitivities</a></li>
<li class="chapter" data-level="2.2.4" data-path="initial-settings.html"><a href="initial-settings.html#carb-ratios"><i class="fa fa-check"></i><b>2.2.4</b> Carb Ratios</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="initial-settings.html"><a href="initial-settings.html#target-ranges"><i class="fa fa-check"></i><b>2.3</b> Target Ranges</a></li>
<li class="chapter" data-level="2.4" data-path="initial-settings.html"><a href="initial-settings.html#autotune"><i class="fa fa-check"></i><b>2.4</b> Autotune</a></li>
<li class="chapter" data-level="2.5" data-path="initial-settings.html"><a href="initial-settings.html#connect-to-apple-health"><i class="fa fa-check"></i><b>2.5</b> Connect To Apple Health</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="add-pump.html"><a href="add-pump.html"><i class="fa fa-check"></i><b>3</b> Add Pump</a><ul>
<li class="chapter" data-level="3.1" data-path="add-pump.html"><a href="add-pump.html#if-you-are-updgrading-from-freeaps-x"><i class="fa fa-check"></i><b>3.1</b> If You Are Updgrading From FreeAPS X</a></li>
<li class="chapter" data-level="3.2" data-path="add-pump.html"><a href="add-pump.html#if-you-are-upgrading-from-loop-to-fax-ng"><i class="fa fa-check"></i><b>3.2</b> If You Are Upgrading From Loop to FAX-ng</a></li>
<li class="chapter" data-level="3.3" data-path="add-pump.html"><a href="add-pump.html#closed-loop"><i class="fa fa-check"></i><b>3.3</b> Closed Loop</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="fine-tuning-using-your-log-files.html"><a href="fine-tuning-using-your-log-files.html"><i class="fa fa-check"></i><b>4</b> Fine-Tuning Using Your Log Files</a><ul>
<li class="chapter" data-level="4.1" data-path="fine-tuning-using-your-log-files.html"><a href="fine-tuning-using-your-log-files.html#copying-your-log-files-to-your-mac"><i class="fa fa-check"></i><b>4.1</b> Copying Your Log Files to Your Mac</a></li>
<li class="chapter" data-level="4.2" data-path="fine-tuning-using-your-log-files.html"><a href="fine-tuning-using-your-log-files.html#setting-uamsmbsmb-limitations"><i class="fa fa-check"></i><b>4.2</b> Setting UAMSMB/SMB Limitations</a><ul>
<li class="chapter" data-level="4.2.1" data-path="fine-tuning-using-your-log-files.html"><a href="fine-tuning-using-your-log-files.html#using-terminal-on-your-mac"><i class="fa fa-check"></i><b>4.2.1</b> Using Terminal on Your Mac</a></li>
<li class="chapter" data-level="4.2.2" data-path="fine-tuning-using-your-log-files.html"><a href="fine-tuning-using-your-log-files.html#an-easier-way-for-the-rest-of-us"><i class="fa fa-check"></i><b>4.2.2</b> An Easier Way for the Rest of Us</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="fine-tuning-using-your-log-files.html"><a href="fine-tuning-using-your-log-files.html#checking-the-results"><i class="fa fa-check"></i><b>4.3</b> Checking The Results</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="adjustmentfactor.html"><a href="adjustmentfactor.html"><i class="fa fa-check"></i><b>5</b> AdjustmentFactor</a><ul>
<li class="chapter" data-level="5.1" data-path="adjustmentfactor.html"><a href="adjustmentfactor.html#ballpark-formula"><i class="fa fa-check"></i><b>5.1</b> Ballpark Formula</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="bolusing-for-meals.html"><a href="bolusing-for-meals.html"><i class="fa fa-check"></i><b>6</b> Bolusing for Meals</a><ul>
<li class="chapter" data-level="6.1" data-path="bolusing-for-meals.html"><a href="bolusing-for-meals.html#rule-of-thumb-meal-bolusing"><i class="fa fa-check"></i><b>6.1</b> Rule-of-Thumb Meal Bolusing</a></li>
<li class="chapter" data-level="6.2" data-path="bolusing-for-meals.html"><a href="bolusing-for-meals.html#let-fax-ng-do-its-work"><i class="fa fa-check"></i><b>6.2</b> Let FAX-ng Do Its Work</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>7</b> Appendix</a><ul>
<li class="chapter" data-level="7.1" data-path="appendix.html"><a href="appendix.html#acronyms"><i class="fa fa-check"></i><b>7.1</b> Acronyms</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">FreeAPS-X-ng User Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="fine-tuning-using-your-log-files" class="section level1">
<h1><span class="header-section-number">4</span> Fine-Tuning Using Your Log Files</h1>
<div id="copying-your-log-files-to-your-mac" class="section level2">
<h2><span class="header-section-number">4.1</span> Copying Your Log Files to Your Mac</h2>
<p>You must first create and copy <em>‌FreeAPS-ng</em> log files from your iPhone to your Mac computer.</p>
<p>Tap <em>Share logs</em> at the very bottom of <em>Settings</em> in FAX-ng. This will create two log files, <code>log.txt</code> and <code>log_prev.txt</code>, and open a screen allowing you to Share them by a variety of methods.</p>
<p>Save these files on your Mac in a <em>Folder</em> of your choice. Leave the <em>Folder window</em> open on your <em>Desktop</em>.</p>
</div>
<div id="setting-uamsmbsmb-limitations" class="section level2">
<h2><span class="header-section-number">4.2</span> Setting UAMSMB/SMB Limitations</h2>
<p>The following <em>Settings</em> act as “safety limiters”:</p>
<pre><code>Max UAMSMB Basal Minutes
Max SMB Basal Minutes
Autosens Max
Autosens Min</code></pre>
<p>They do they not affect the calculations except by putting up fences.</p>
<p>The primary focus on a new setup is to have initial <em>Settings</em> so that the system is immediately able to function adequately using its default calculations.</p>
<p>But if your <em>Basal Minutes</em> is set to <code>30</code> and your <em>Basal Rate</em> is <code>.1</code>, and the app wants to give you an SMB of <code>2U</code>, the <em>Basal Minutes</em> setting will limit it to <code>.5U</code> at a time, and your blood sugar will be high forever.</p>
<p>So you will want to increase Basal Minutes to a value that allows the algorithm to do its job. The ideal is to create <em>Settings</em> that allow 95% of any <em>UAMSMB/SMB calculation</em> made by FAX-ng to influence insulin delivery. For this we need to ensure that:</p>
<pre><code>SMB is not limited by maxUAMSMBBasalMinutes
SMB is not limited by maxSMBBasalMinutes
Dynamic ISF limited by autosens_max setting: 1.3 (1.3)</code></pre>
<div id="using-terminal-on-your-mac" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Using Terminal on Your Mac</h3>
<p>The <em>Terminal</em> application is in <em>Applications —&gt; Utilities —&gt; Terminal</em></p>
<p><strong>SHORTCUT:</strong> Click on the <em>Desktop</em> in <em>Finder</em> then hold [SHIFT+OPTION+U] keys down together, press [RETURN] or [ENTER], then start typing <em>terminal</em> when the window opens. Double-click the now-selected <em>Terminal</em> application to open it.</p>
<p>Type <code>cd [SPACE]</code> in Terminal, then switch to <em>Finder</em> and drag the small <em>Folder icon</em> where you saved the log files, into the <em>Terminal</em> window.</p>
<p>Press [ENTER] or [RETURN]. This will change <em>Terminal</em> to the log file directory. You can type <code>ls</code> then <code>[RETURN]</code> or <code>[ENTER]</code> to list them.</p>
<p>The commands given below will now work correctly.</p>
<p>First, find find the total number of lines from the log pertinent to each.</p>
<p>Copy and paste the first line of each command (below), after the <code>$</code> prompt. The first line is the command, the second the returned result:</p>
<pre><code>grep maxUAMSMBBasalMinutes log.txt | grep limited | wc -l
     114</code></pre>
<p>Then find the number of lines that are SMB-limited:</p>
<pre><code>grep maxUAMSMBBasalMinutes log.txt | grep &quot;SMB limited&quot; | wc -l
      57</code></pre>
<p>Compare the two results. If the number of limited lines is more than 5% (in the above examples it obviously is), you need to adjust <code>maxUAMSMBBasalMinutes</code>, guided by these log reports.</p>
<p>Sort the result by calculated units (the last value on the line):</p>
<pre><code>grep maxUAMSMBBasalMinutes log.txt | grep &quot;SMB limited&quot;  | sort -n +20</code></pre>
<p>For example, if the highest value is 2.26U and your <code>maxUAMSMBBasalMinutes</code> right now is .2U, and there are many lines with values more than 1U, you would need to raise SMBMax to 1U and ignore the ones &gt;1U.</p>
<p>Changing this is your <em>Settings</em> will clear off most of the list.</p>
</div>
<div id="an-easier-way-for-the-rest-of-us" class="section level3">
<h3><span class="header-section-number">4.2.2</span> An Easier Way for the Rest of Us</h3>
<p>Here’s a much easier way for non-technical people:
* Email log files to yourself
* Open <code>log_prev.txt</code>
* Press <code>[CONTROL/COMMAND] + F</code> to perform a search
* Enter e.g. <em>SMB is limited by maxUAMSMBBasalMinutes</em> into the <em>Search field</em>.
* Press [RETURN/ENTER]</p>
<p>Scroll through the search results to see how much the algorithm is limiting insulin delivery. Do the maths and up your UAMSMB basal minutes by that amount. For example: the algorithm bolused 1U insulin when it says it really wanted to bolus 3U, so increase <strong>UAMBasalMinutes</strong> by 3x in <em>Settings</em>.</p>
</div>
</div>
<div id="checking-the-results" class="section level2">
<h2><span class="header-section-number">4.3</span> Checking The Results</h2>
<p>To check this (except the first day or so), run the above commands on the <code>log_prev.txt</code> file, which reports the previous 24h period. Leave it run for a full day before rechecking.</p>
<p>If everything else is set up correctly for you, these SMB maximums won’t be needed in the future. But now you can know for sure that they are based on the results returned in your log files.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="add-pump.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="adjustmentfactor.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03_Fine-Tuning_Using_Your_Log_Files.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
