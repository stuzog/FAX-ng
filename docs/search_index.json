[["index.html", "FreeAPS-X-ng User Guide 1 How To Use This Guide 1.1 The Sidebar 1.2 The Toolbar", " FreeAPS-X-ng User Guide By Stuart Hertzog with assistance from Marc Fornier This version published 2022-07-04 1 How To Use This Guide 1.1 The Sidebar 1.2 The Toolbar The pale grey icons at the top of the right-hand pane are the Toolbar buttons. They are fixed at the top of the page and are always available as you scroll. Starting at the top left, they are: 1.2.1 Show/Hide The first button on the toolbar can toggle the visibility of the Sidebar. You can also tap the S key on your keyboard to do the same thing. If you close the Sidebar, it will remain closed the next time you open the book. 1.2.2 Search The second button on the toolbar is the Search button, keyboard shortcut F (Find). Click the button to see a Search box. As you type in the box, you will see only sections that match the search keyword. Use the Arrow Keys [Up/Down] to highlight the previous/next match in the search results. Click the Search Button again (or hit F outside the Search Box). The search keyword will be emptied and the Search box will be hidden. 1.2.3 Theme settings The third button on the toolbar is for Font/Theme settings. You can: Change the font size (bigger/smaller), the font family (serif/sans serif), and the theme (White, Sepia, or Night). 1.2.4 Downloads The Download icon button lets you download files of available types. Downloadable file types (PDF, EBOOK) are displayed in a drop-down menu. Click the type of file you want. If more than one file of that type is available, they will be shown. Click the specific file or [ALT/OPTION + CLICK] to select more than one. 1.2.5 Sharing On the right end of the toolbar are buttons to share the link on social media sites such as Twitter, Facebook, and Linkedin. 1.2.6 Information The Information Button (‘i’) lists keyboard shortcuts available to navigate the document. "],["initial-settings.html", "2 Initial Settings 2.1 SERVICES 2.2 CONFIGURATION 2.3 Target Ranges 2.4 Autotune 2.5 Connect To Apple Health", " 2 Initial Settings The following Settings are listed in order of appearance in the FAX-ng app. If not mentioned, leave the existing Default Settings. Click the Cog Wheel (bottom right of the FAX-ng screen) 2.1 SERVICES 2.1.1 Nightscout URL - Your Nightscout URL ( NO / at the end) Password - Your API Secret as the password Connect - Tap –—&gt; Connected! Allow Uploads - Enable 2.1.2 CGM Type - Dexcom G6 Transmitter ID - Enter current 2.1.3 Notifications Your choice, e.g. All turned Off, set High —&gt; 10 2.2 CONFIGURATION 2.2.1 Preferences 2.2.1.1 FREEAPS X Recommended Insulin Fraction —&gt; 2 2.2.1.2 OPENAPS MAIN Settings Insulin Curve - Set to the type of insulin you are using Max IOB - raise to 10 2.2.1.3 DYNAMIC SETTINGS Dynamic CR - Enable Adjust Basal - Enable 2.2.1.4 OPENAPS SMB SETTINGS Enable SMB … options - Enable All Enable UAM - Enable Max Delta-BG Threshold SMB —&gt; 0.3 SMB Interval —&gt; 1 Bolus Increment —&gt; 0.05 ONLY if using Omnipod 2.2.1.5 OPENAPS TARGETS SETTINGS High TempTarget Raises Sensitivity - Enable Low TempTarget Raises Sensitivity - Enable Sensitivity Raises Target - Enable Resistance Lowers Target - Enable 2.2.2 Basal Profile Copy from old Loop, FAX or Nightscout,, or as advised. Example Basal Profile listed in Nightscout profile 2.2.3 Insulin Sensitivities Use Autotune value 2.2.4 Carb Ratios Use Autotune calculated value 2.3 Target Ranges Set to whatever range with which you are comfortable Lower range is the one that matters e.g. 5.5 - 5.5, 24/7 2.4 Autotune Enable 2.5 Connect To Apple Health Enable You must also Enable Read and Write to FreeAPS X NextGen in Apple Health: iPhone Settings –&gt; Health –&gt; FreeAPS –&gt; Blood Glucose "],["add-pump.html", "3 Add Pump 3.1 If You Are Updgrading From FreeAPS X 3.2 If You Are Upgrading From Loop to FAX-ng 3.3 Close Loop", " 3 Add Pump 3.1 If You Are Updgrading From FreeAPS X Only one pump at a time can be controlled by FreeAPS-X or FAX-ng, so to add a pump to a new setup you must first Disable OrangeLink/RileyLink in the old pump setup. 3.2 If You Are Upgrading From Loop to FAX-ng ATTENTION: You must FIRST disconnect RileyLink/OrangeLink/EmaLink from Loop.app BEFORE trying to connect a new Omnipod to FAX-ng. At a scheduled or unscheduled Omnipod change: While in Loop Tap Replace Pod BEFORE disconnecting your RileyLink Settings —&gt; OmniPod screen (Also available from Pump/Pod icon in Loop top Header) Turn RileyLink switch OFF RileyLink Green LED will turn off Close the Loop App Swipe Up Loop icon on Home Screen Back in FAX-ng Select Omnipod in Settings —&gt; Pump RileyLink should be recognised immediately Turn RileyLink ON Fill a new pump or OmniPod, attach to body Start New Pod 3.3 Close Loop Enable "],["fine-tuning-using-your-log-files.html", "4 Fine-Tuning Using Your Log Files 4.1 Copying Your Log Files to Your Mac 4.2 Setting UAMSMB/SMB Limitations", " 4 Fine-Tuning Using Your Log Files 4.1 Copying Your Log Files to Your Mac You must first create and copy ‌FreeAPS-ng log files from your iPhone to your Mac computer. Tap Share logs at the bottom of Settings in FAX-ng This will create two log files, log.txt and log_prev.txt, and open a screen allowing you to transfer them by a variety of methods. Save these files on your Mac in a Folder of your choice Leave the Folder window open on your Desktop 4.2 Setting UAMSMB/SMB Limitations 4.2.1 Safety Limiters The following Settings act as “safety limiters”: Max UAMSMB Basal Minutes Max SMB Basal Minutes Autosens Max Autosens Min They do they not affect calculations except by putting up fences. The primary focus on a new setup is to have initial Settings* so that the system is immediately able to function adequately using its default calculations. But if your Basal Minutes is set to 30 and your Basal Rate is .1, and the app wants to give you an SMB of 2U, the Basal Minutes setting will limit it to .5U at a time, and your blood sugar will be high forever. So you will want to increase Basal Minutes to a value that allows the algorithm to do its job. The ideal is to create Settings that allow 95% of any UAMSMB/SMB calculation made by FAX-ng to influence insulin delivery. For this we need to ensure that: SMB is not limited by maxUAMSMBBasalMinutes SMB is not limited by maxSMBBasalMinutes Dynamic ISF limited by autosens_max setting: 1.3 (1.3) To understand SMB and its limitations factors, you can read: Understanding Super Micro Bolus (SMB) in the OpenAPS documentation. 4.2.2 Open Terminal on Your Mac The Terminal application is in Applications —&gt; Utilities —&gt; Terminal 4.2.2.1 SHORTCUT to open Terminal Click on the Desktop in Finder Hold the [COMMAND] key then tap the [SPACEBAR] Start typing terminal when the Spotlight Search bar opens Press [RETURN/ENTER] to open the Terminal application 4.2.2.2 Change focus to the Log File Directory Type cd [SPACE] in Terminal Switch to Finder Drag the small Folder icon where you saved the log files, into the Terminal window path/to/the/log/files/folder will appear next to cd Press [ENTER/RETURN]. This will change Terminal to the log file directory. You can type ls then tap [RETURN/ENTER] to list the log files. The following commands will now work correctly. 4.2.3 Find and Compare The Ratio of SMB-Limited Lines First, find find the total number of lines from the log pertinent to each. Copy and paste the first line of each command (below), after the $ prompt. The first line is the command, the second the returned result: grep maxUAMSMBBasalMinutes log.txt | grep limited | wc -l 114 Then find the number of lines that are SMB-limited: grep maxUAMSMBBasalMinutes log.txt | grep &quot;SMB limited&quot; | wc -l 57 Compare the two results. If the number of limited lines is more than 5% (in the above examples it obviously is), you need to adjust maxUAMSMBBasalMinutes, guided by these log reports. Sort the result by calculated units (the last value on the line): grep maxUAMSMBBasalMinutes log.txt | grep &quot;SMB limited&quot; | sort -n +20 Scroll through the search results to see how much the algorithm is limiting insulin delivery. The overall idea is to “ignore” the extreme SMBs. In the log file, you will see lines similar to: DEV: JavaScript log: SMB is not limited by MaxUAMSMBBasalMinutes. ( insulinReq: 0.53U ) DEV: JavaScript log: SMB limited by maxUAMSMBBasalMinutes [ 60m ]: 1.5U ( 6.28U ) There will be entries for both maxUAMSMBBasalMinutes and maxSMBBasalMinutes Optimally, you want to have more “not limited” lines then limited, with limited lines being less then 5% of all of the lines. If they are less than 5% of all lines, you don’t need to change your settings. To adjust maxUAMSMBBasalMinutes to reduce the percentage of lines that are limited, look for the line that represents about the mid-way of limited values. For example, if you have something like: DEV: JavaScript log: SMB limited by maxUAMSMBBasalMinutes [ 60m ]: 1.5U ( 6.28U ) DEV: JavaScript log: SMB limited by maxUAMSMBBasalMinutes [ 60m ]: 1.5U ( 5.72U ) DEV: JavaScript log: SMB limited by maxUAMSMBBasalMinutes [ 60m ]: 1.5U ( 6.1U ) Use the entry with 6.1U as your adjustment point, with the formula: 60m * ( 6.1 / 1.5 ) = 240 And use the rounded results for your new value in maxUAMSMBBasalMinutes. Do the maths and up your UAMSMB basal minutes by that amount. For example: the algorithm bolused 1U insulin when it says it really wanted to bolus 3U, so increase UAMBasalMinutes by 3x in Settings. If you need to adjust, there are going to be more lines then the above to work with, but the value in parenthesis is what the system has calculated you require in the way of insulin, and the value outside is the limit BASED ON BasalMinutes. The 1.5U will vary depending on time of day, as its determined by your Basal Rate at the time of calculation. When you make the change, give it 24 hours before checking and adjusting again. 4.2.4 An Easier Way for the Rest of Us Here’s a much easier way for non-technical people: * Email log files to yourself * Open log_prev.txt * Press [CONTROL/COMMAND] + F to perform a search * Enter e.g. SMB is limited by maxUAMSMBBasalMinutes into the Search field. * Press [RETURN/ENTER] Search for either “is limited” or “is not limited” to get the numbers for both. If the [“limited”]/[“is not limited”] x 100 is less than 5 (5%), then don’t change anything. 4.2.5 Checking The Results To check this (except the first day or so), run the above commands on the log_prev.txt file, which reports the previous 24-hour period. Leave it run for a full day before rechecking. If everything else is set up correctly for you, these SMB maximums won’t be needed in the future. But now you can know for sure that they are based on the results returned in your log files. "],["adjustment-factor-autosens.html", "5 Adjustment Factor (AutoSens) 5.1 Ballpark Formula", " 5 Adjustment Factor (AutoSens) Settings –&gt; Preferences –&gt; Dynamic Settings –&gt; Adjustment Factor Adjustment Factor is a multiplier that impacts insulin delivery. It determines the aggressiveness of the DynamicISF algorithm, and it tends to be person-specific. Basically, it’s determining how sensitive/resistant you are compared to your baseline. An AutoSens value of 1 means that your sensitivity is what the system expects. More than 1 means that you’re needing more insulin than your baseline Less than 1 means you are currently more sensitive and need less insulin The default is set at 1, which means that there is no change from those Settings values that affect insulin delivery. A full explanation of AutoSens can found in the OpenAPS documentation. 5.1 Ballpark Formula There is a formula for deriving an approximate number to begin with: adjustmentFactor = 277700/TDD * BG_target * (18 * 18) * StaticISF Total Daily Delivery (TDD) can be found by tapping the green circle at the top of the main FAX-ng page. There are three numbers in the purple area: TDD, Weighted Average (Wavg), and 7day. Use the TDD value. BG_Target is whatever you have chosen for your target, e.g. 5.5. Use the Autotune value for StaticISF Settings –&gt; Configuration –&gt; Autotune Autotune runs automatically every day, but you may want to run it now if it hasn’t run for a while. Th Autotune value also can be found in Settings -&gt; Configuration –&gt; Insulin Sensitivities –&gt; Autotunee –&gt; Calculated Sensitivity Using these example numbers, the AdjustmentFactor will be: 277700 / ( 2.31 * 78.75 * 5.5 * ( 18 * 18 ) * 2.31) = 0.856 It isn’t 100%, but it gets you into the ballpark range, and you can tweak up or down from there. "],["bolusing-for-meals.html", "6 Bolusing for Meals 6.1 Rule-of-Thumb Meal Bolusing 6.2 Let FAX-ng Do Its Work", " 6 Bolusing for Meals FreeAPS (FAX) doesn’t actually give meal bolus recommendations as does Loop. Here’s what the Meals section of LoopAndLearn FreeAPS docs recommends: The built-in function to give a bolus is not a bolus calculator in the same way as Loop has one, so don’t expect it to give you enough insulin. It takes the insulinReq calculation and uses it to provide a bolus estimate. The insulinReq value is calculated based on a number of prediction curves, and when carbs are added, it mediates the effect of carbs with the other curves. It’s not a bolus calculator. The insulinReq value is not necessarily as much insulin as the normal meal bolus would be (it’s conservative for safety reasons). The recommendation with oref1 is to bolus 60%-75% of required meal bolus and leave the algorithm to deal with variation in absorption. This is the way most people use it. 6.1 Rule-of-Thumb Meal Bolusing Rather than pull out a calculator, one pre-bolus strategy might be to form a rule-of-thumb scale for yourself like the following. You should make your own based on your needs and Carb Ratio (CR): Small meal 20g or less –&gt; 2U Medium-size meal 20g-40g –&gt; 3U Big meal 40g or more –&gt; 4U Your scale should be based upon your carb ratio and the % of upfront bolus that you prefer. For example, with a Carb Ratio of 10, the above meal boluses would provide a: * 100% upfront bolus for 20g * 75% upfront bolus for 40g, and * 67% upfront bolus for 60g 6.2 Let FAX-ng Do Its Work With an appropriate pre-bolus and Settings, you should NOT need to issue manual boluses after your meal. This may be a difficult task coming from Loop! If you used automatic bolus with Loop or the FreeAPS fork, you’ll find Temp Basal a little slower than you are used to, but it’s worth taking the time to test and adjust your settings before you turn on SMB/UAM. Observe for a few days and make adjustments as needed so that you won’t have to issue correction meal boluses. (Thanks to LoopAndLearn for this.) "],["appendices.html", "7 Appendices 7.1 Appendix A: Acronyms 7.2 Appendix B: Settings 7.3 Appendix C: Preferences", " 7 Appendices 7.1 Appendix A: Acronyms BG Blood Glucose BGI Blood Glucose Impact CI Carb Impact COB Carbs On Board CR Carb Ratio ICR Insulin to Carb Ratio IOB Insulin On Board ISF Insulin Sensitivity Factor ISR Insulin Sensitivity Ratio RIF Recommended Insulin Fraction SMB Super Micro Bolus SR Sensitivity Ratio UAM Unannounced Meals ZT Zero-Temp 7.2 Appendix B: Settings 7.2.1 FREEAPS X V(version) Closed Loop 7.2.2 DEVICES Pump Omnipod Pod Settings Expires Pod Active Clock Bolus Delivery Basal Delivery Alarms Reservoir Insulin Delivered CONFIGURATION Suspend Delivery Disable Confirmation Beeps Disable Automatic Bolus Expiration Reminder Change Time Zone Insulin Type Replace Pod DEVICES RileyLink/OrangeLink/EmaLink DIAGNOSTICS Read Pod Status Play Test Beeps Read Pulse Log Test Command POD DETAILS Assigned Addresses Lot PI Version PM Version 7.2.3 SERVICES Nightscout Nightscout Config Nightscout URL Nightscout Secret Key Connect Delete Allow uploads LOCAL GLUCOSE SOURCE Use local glucose server Port Backfill glucose CGM Type TRANSMITTER ID CALENDAR Create events in calendar OTHER Upload glucose to Nightscout 7.2.4 Apple Health Connect to Apple Health 7.2.5 Notifications GLUCOSE Show glucose on the app badge Always Notify Glucose Also play alert sound Also add source info Low High OTHER Carbs Required Threshold 7.2.6 CONFIGURATION Preferences are in Appendix C: Preferences 7.2.7 Pump Settings DELIVERY LIMITS Max Basal Max Bolus DURATION OF INSULIN ACTION DIA Save on Pump ### Basal Profile SCHEDULE Rate(s) Add Save on Pump 7.2.8 Insulin Sensitivities AUTOTUNE Calculated Sensitivity AUTOSENS Sensitivity Ratio Calculated Sensitivity SCHEDULE Rate(s) Add Save 7.2.9 Carb Ratios AUTOTUNE Calculated Ratio SCHEDULE Ratio(s) Add Save 7.2.10 Target Ranges SCHEDULE Range(s) Add Save 7.2.11 Autotune Use Autotune Last Run Run now Carb Ratio Sensitivity BASAL PROFILE Rate(s) Delete Autotune data 7.2.12 DEVELOPER Debug options 7.2.13 Animated Background 7.2.14 Share logs 7.3 Appendix C: Preferences 7.3.1 FREEAPS X Glucose Units Remote control Recommended Insulin Fraction Skip Bolus screen after carbs 7.3.2 OPENAPS MAIN SETTINGS Insulin curve Max IOB Max COB Max Daily Safety Multiplier Current Basal Safety Multiplier Autosens Max Autosens Min 7.3.3 DYNAMIC SETTINGS Enable Dynamic ISF Enable Dynamic CR Adjustment Factor Use Logarithmic Formula Weighted Average of TDD. Weight of past 24 hours: Adjust Basal 7.3.4 OPEN APS SMB SETTINGS Enable SMB Always Max Delta-BG Threshold SMB Enable SMB with COB Enable SMB With Temptarget Enable SMB After Carbs Allow SMB With High Temptarget Enable UAM Max SMB Basal Minutes SMB DeliveryRatio SMB Interval Bolus Increment 7.3.5 OPENAPS TARGETS SETTINGS High Temptarget Raises Sensitivity Low Temptarget Lowers Sensitivity Sensitivity Raises Target Sensitivity Lowers Target Advanced Target Adjustments Exercise Mode Half Basal Exercise Target Wide BG Target Range 7.3.6 OPENAPS OTHER SETTINGS Rewind Resets Autosens Use Custom Peak Time Insulin Peak Time Skip Neutral Temps Unsuspecting If No Temp Suspend Zeros IOB Bolus Snooze DIA Divisor Min 5m Carbimpact Autotune ISF Autotune Faction Remaining Carbs Faction Noisy CGM Target Multiplier 7.3.7 USE AUTO ISF Enable AutoISF 7.3.8 AUTOISF SETTINGS FORGET ABOUT THESE IF AUTO ISF ISS TOGGLED OFF * Enable Floating Carbs * Enable AutoISF with COB * Enable BG acceleration in AutoISF 2.2 * AutoISF HourlyMaxChange * AutoISF Max * SMB Max RangeExtension * SMB DeliveryRatio BG Range * SMB DeliveryRatio BG Minimum * SMB DeliveryRatio BG Maximum * ISF weight while BG accelerates * ISF weight while BG decelerates * AutoISF Min * ISF Weight for higher BGs * ISF weight for lower BGs * ISF weight for higher BG deltas * Enable always postprandial ISF adaption * ISF weight for postprandial BG rise * Duration ISF postprandial adaption "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
